# 3X-ui-ShopBot | Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ VPN

<div align="center">
    <a href="#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</a> ‚Ä¢
    <a href="#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞">–ù–∞—Å—Ç—Ä–æ–π–∫–∞</a> ‚Ä¢
    <a href="#–ø–æ–¥–¥–µ—Ä–∂–∫–∞">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
</div>

**3X-ui-ShopBot** ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–¥–∞–∂ VLESS-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. –ë–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –ø–∞–Ω–µ–ª—å—é **3x-ui** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∫—É–ø–∫–∏, –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂**: –í—ã–¥–∞—á–∞ –∫–ª—é—á–µ–π, –ø—Ä–∏–µ–º –æ–ø–ª–∞—Ç—ã, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫.
*   **–í–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**: –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Å–µ—Ä–≤–µ—Ä–∞–º–∏, —Ç–∞—Ä–∏—Ñ–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–æ—Ç–∞.
*   **–ú—É–ª—å—Ç–∏-—Å–µ—Ä–≤–µ—Ä–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ 3x-ui (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∏ –≤—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–π).
*   **–ü–ª–∞—Ç–µ–∂–Ω—ã–µ —à–ª—é–∑—ã**: YooKassa, YooMoney, Unitpay, FreeKassa, CryptoBot, Telegram Stars.
*   **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –±–æ–Ω—É—Å—ã –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π.
*   **–¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö.
*   **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –°–∏—Å—Ç–µ–º–∞ —Ç–∏–∫–µ—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –±–æ—Ç–∞.
*   **–†–∞—Å—Å—ã–ª–∫–∏**: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   **Python 3.10** –∏–ª–∏ –≤—ã—à–µ.
*   **Git**.

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Windows (–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫)

1.  **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª–∏):
    ```powershell
    git clone https://github.com/vsvavan2/my-3xui-shopbot.git
    cd my-3xui-shopbot
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**:
    ```powershell
    # –ù–∞—Ö–æ–¥—è—Å—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ –ª–µ–∂–∏—Ç requirements.txt)
    python -m venv .venv
    ```

3.  **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**:
    ```powershell
    .\.venv\Scripts\Activate
    ```

4.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
    ```powershell
    pip install -r requirements.txt
    ```

5.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
    *   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Ñ–∞–π–ª `.env` (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`).
    *   –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ç–æ–∫–µ–Ω –±–æ—Ç–∞, ID –∞–¥–º–∏–Ω–∞) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö `users.db`, –Ω–æ –ø–µ—Ä–≤–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤ `.env`.

6.  **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**:
    ```powershell
    # –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
    $env:PYTHONPATH="src"
    python -m shop_bot
    ```

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Ubuntu (–•–æ—Å—Ç–∏–Ω–≥)

1.  **–û–±–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python/Git**:
    ```bash
    sudo apt update && sudo apt install python3 python3-venv python3-pip git -y
    ```

2.  **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**:
    ```bash
    git clone https://github.com/vsvavan2/my-3xui-shopbot.git
    cd my-3xui-shopbot
    ```

3.  **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ venv**:
    ```bash
    python3 -m venv .venv
    source .venv/bin/activate
    ```

4.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
    ```bash
    pip install -r requirements.txt
    ```

5.  **–ó–∞–ø—É—Å–∫ (—á–µ—Ä–µ–∑ systemd —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)**:
    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–ª—É–∂–±—ã: `/etc/systemd/system/shopbot.service`
    ```ini
    [Unit]
    Description=3x-ui Shop Bot
    After=network.target

    [Service]
    User=root
    WorkingDirectory=/path/to/my-3xui-shopbot
    Environment="PYTHONPATH=/path/to/my-3xui-shopbot/src"
    ExecStart=/path/to/my-3xui-shopbot/.venv/bin/python -m shop_bot
    Restart=always

    [Install]
    WantedBy=multi-user.target
    ```
    –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
    ```bash
    sudo systemctl enable shopbot
    sudo systemctl start shopbot
    ```

---

## üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –≤ –≤–µ–±-–ø–∞–Ω–µ–ª–∏: —Ä–∞–∑–¥–µ–ª **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** -> **–ü–ª–∞—Ç–µ–∂–∏**.

### 1. YooKassa (–ÆKassa)
*   **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: [yookassa.ru](https://yookassa.ru/)
*   **–ì–¥–µ –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ**: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚ûú –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚ûú –ú–∞–≥–∞–∑–∏–Ω ‚ûú –ö–ª—é—á–∏ API.
*   **–í –∞–¥–º–∏–Ω–∫–µ**:
    *   `Shop ID`: –í–∞—à ID –º–∞–≥–∞–∑–∏–Ω–∞.
    *   `Secret Key`: –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á API.

### 2. YooMoney (–ÆMoney)
*   **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: [yoomoney.ru](https://yoomoney.ru/)
*   **–ì–¥–µ –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ**:
    1.  –°–æ–∑–¥–∞–π—Ç–µ –∫–æ—à–µ–ª–µ–∫.
    2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](https://yoomoney.ru/myservices/new).
    3.  **Redirect URI**: —É–∫–∞–∂–∏—Ç–µ `https://–í–ê–®_–î–û–ú–ï–ù/yoomoney/callback` (—Ç—Ä–µ–±—É–µ—Ç—Å—è HTTPS).
    4.  **Notification URI (Webhook –¥–ª—è P2P/QuickPay)**: `https://–í–ê–®_–î–û–ú–ï–ù/yoomoney-webhook` (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π).
*   **–í –∞–¥–º–∏–Ω–∫–µ**:
    *   `–ö–æ—à–µ–ª—ë–∫ YooMoney`: –ù–æ–º–µ—Ä –≤–∞—à–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 41001...).
    *   `Client ID`: –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    *   `Client Secret`: –í–∫–ª—é—á–∞–π—Ç–µ, –µ—Å–ª–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ (OAuth client_secret).
    *   `Redirect URI`: –¢–æ—á–Ω–æ —Ç–æ—Ç –∂–µ, —á—Ç–æ —É–∫–∞–∑–∞–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://–í–ê–®_–î–û–ú–ï–ù/yoomoney/callback`).
    *   `–°–µ–∫—Ä–µ—Ç –≤–µ–±—Ö—É–∫–∞`: –õ—é–±–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π QuickPay; –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ `/yoomoney-webhook`.
    *   –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ü–æ–¥–∫–ª—é—á–∏—Ç—å YooMoney"** –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
*   **–ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ YooMoney (–∫–∞–±–∏–Ω–µ—Ç ‚Üí –∞–¥–º–∏–Ω–∫–∞)**:
    1.  –í –∫–∞–±–∏–Ω–µ—Ç–µ YooMoney –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
        - –ù–∞–∑–≤–∞–Ω–∏–µ: –ª—é–±–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Vless)
        - –ê–¥—Ä–µ—Å —Å–∞–π—Ç–∞: `https://–í–ê–®_–î–û–ú–ï–ù`
        - Redirect URI: `https://–í–ê–®_–î–û–ú–ï–ù/yoomoney/callback`
        - Notification URI: `https://–í–ê–®_–î–û–ú–ï–ù/yoomoney-webhook`
        - –í–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É client_secret —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—å `Client Secret` –≤ –∞–¥–º–∏–Ω–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏ –æ–±–º–µ–Ω–µ –∫–æ–¥–∞ –Ω–∞ —Ç–æ–∫–µ–Ω.
    2.  –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –±–æ—Ç–∞: —É–∫–∞–∂–∏—Ç–µ `Client ID`, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `Client Secret`, `Redirect URI`, –∫–æ—à–µ–ª—ë–∫ –∏ —Å–µ–∫—Ä–µ—Ç –≤–µ–±—Ö—É–∫–∞. –ù–∞–∂–º–∏—Ç–µ **"–ü–æ–¥–∫–ª—é—á–∏—Ç—å YooMoney"** ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ yoomoney.ru, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π YooMoney –≤–µ—Ä–Ω—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `code` –Ω–∞ `/yoomoney/callback`, —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
    3.  –î–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫–æ—à–µ–ª—å–∫—É (QuickPay) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±—Ö—É–∫ `/yoomoney-webhook` ‚Äî –ø–æ–¥–ø–∏—Å—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ –≤–∞—à–µ–º—É —Å–µ–∫—Ä–µ—Ç—É, —É—Å–ø–µ—à–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∑–∞—á–∏—Å–ª—è—é—Ç—Å—è.
*   **–ü—Ä–æ–≤–µ—Ä–∫–∞**:
    *   –í –∞–¥–º–∏–Ω–∫–µ –Ω–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å YooMoney"** ‚Äî –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã `account-info` –∏ `operation-history`; –ø—Ä–∏ –≤–∞–ª–∏–¥–Ω–æ–º —Ç–æ–∫–µ–Ω–µ —É–≤–∏–¥–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.
*   **–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏**:
    *   –û—Ç–∫—Ä—ã–≤–∞—Ç—å `/yoomoney/callback` –Ω–∞–ø—Ä—è–º—É—é –Ω–µ–ª—å–∑—è ‚Äî –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ YooMoney –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ `code`. –°–æ–æ–±—â–µ–Ω–∏–µ ¬´YooMoney: –Ω–µ –ø–æ–ª—É—á–µ–Ω code –∏–∑ OAuth.¬ª –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∑–∞—Ö–æ–¥ –±—ã–ª –≤—Ä—É—á–Ω—É—é.
    *   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –∏ –¥–æ–º–µ–Ω –±–µ–∑ –ø–æ—Ä—Ç–∞. –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `:1488`) –∏ `http://` –≤ —Ñ–æ—Ä–º–µ YooMoney –æ–±—ã—á–Ω–æ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Nginx+Let‚Äôs Encrypt) –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–π—Ç–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

### 3. Unitpay
*   **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: [unitpay.ru](https://unitpay.ru/)
*   **–ì–¥–µ –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ**: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚ûú –ü—Ä–æ–µ–∫—Ç ‚ûú –ù–∞—Å—Ç—Ä–æ–π–∫–∏.
*   **–í –∞–¥–º–∏–Ω–∫–µ**:
    *   `Public Key`: –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –ø—Ä–æ–µ–∫—Ç–∞.
    *   `Secret Key`: –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (Secret Key).

### 4. FreeKassa
*   **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: [freekassa.ru](https://freekassa.ru/)
*   **–ì–¥–µ –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ**: –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚ûú –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚ûú API.
*   **–í –∞–¥–º–∏–Ω–∫–µ**:
    *   `Merchant ID`: ID –≤–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞.
    *   `Secret Word 1`: –°–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–ª–æ–≤–æ 1.
    *   `Secret Word 2`: –°–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–ª–æ–≤–æ 2.

### 5. CryptoBot
*   **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: –û—Ç–∫—Ä–æ–π—Ç–µ [@CryptoBot](https://t.me/CryptoBot) –≤ Telegram.
*   **–ì–¥–µ –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ**:
    1.  –ù–∞–ø–∏—à–∏—Ç–µ `/start`.
    2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Crypto Pay** ‚ûú **Create App**.
    3.  –ü–æ–ª—É—á–∏—Ç–µ **API Token**.
*   **–í –∞–¥–º–∏–Ω–∫–µ**:
    *   `CryptoBot Token`: –í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω.

### 6. Telegram Stars
*   **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: –ß–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather).
*   **–ì–¥–µ –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ**:
    1.  –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞.
    2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Payments**.
    3.  –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–¥–ª—è Telegram Stars —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –Ω–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–ª–∞—Ç–µ–∂–µ–π, –µ—Å–ª–∏ –≤—ã–≤–æ–¥–∏—Ç–µ –≤ —Ñ–∏–∞—Ç, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –≤–∞–ª—é—Ç—ã Stars).
    *   *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ*: –î–ª—è –ø—Ä–∏–µ–º–∞ Stars –Ω–∞–ø—Ä—è–º—É—é –±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–µ–º XTR.
*   **–í –∞–¥–º–∏–Ω–∫–µ**:
    *   –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é `Enable Telegram Stars` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞).

---

## ‚ùì –†–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º (FAQ)

### 1. –û—à–∏–±–∫–∞ Docker: `KeyError: 'ContainerConfig'`
–ï—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ Docker –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É:
```
KeyError: 'ContainerConfig'
```
–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è `docker-compose` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.29.2), –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
–í–∞–º –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `docker-compose` –¥–æ –≤–µ—Ä—Å–∏–∏ v2.

**–î–ª—è Ubuntu:**
1.  –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π docker-compose:
    ```bash
    sudo apt-get remove docker-compose
    ```
2.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Compose v2 (–∫–∞–∫ –ø–ª–∞–≥–∏–Ω –¥–ª—è Docker CLI):
    ```bash
    sudo apt-get update
    sudo apt-get install docker-compose-plugin
    ```
3.  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é:
    ```bash
    docker compose version
    # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ: Docker Compose version v2.x.x
    ```
4.  –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥–æ–π (–±–µ–∑ –¥–µ—Ñ–∏—Å–∞):
    ```bash
    docker compose up -d --build
    ```

### 2. –û—à–∏–±–∫–∞ "–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ" –≤ –±–æ—Ç–µ
–ï—Å–ª–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤—ã –≤–∏–¥–∏—Ç–µ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ:
1.  –ó–∞–π–¥–∏—Ç–µ –≤ **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** -> **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** -> **–ö–æ–Ω—Ç–µ–Ω—Ç**.
2.  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫ –∏ —Ä–∞–∑–¥–µ–ª–æ–≤.
3.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª—è –Ω—É–∂–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Speedtest) –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ö–æ—Å—Ç—ã –≤ —Ä–∞–∑–¥–µ–ª–µ **–•–æ—Å—Ç—ã**.

---

## üßπ –û—á–∏—Å—Ç–∫–∞ –º—É—Å–æ—Ä–∞ –∏ –±—ç–∫–∞–ø–æ–≤ –Ω–∞ Ubuntu

### –ì–¥–µ –æ–±—ã—á–Ω–æ –ª–µ–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
*   –ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: `/opt/my-3xui-shopbot` –∏–ª–∏ `/home/USER/my-3xui-shopbot`
    *   –ë—ç–∫–∞–ø—ã: `backups/db-backup-*.zip`
    *   –ë–∞–∑–∞: `users.db`
    *   –°–ª—É–∂–µ–±–Ω—ã–µ: `__pycache__/`, `*.pyc`
*   –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã speedtest: `/tmp/ookla-speedtest*`, `/tmp/speedtest*`
*   –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã: `/var/log/journal`, `/var/log/*`
*   Docker –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏): `/var/lib/docker/*`
*   –ö—ç—à–∏:
    *   pip: `~/.cache/pip`
    *   APT: `/var/cache/apt`

### –ù–∞–π—Ç–∏ –∏ –æ—Ü–µ–Ω–∏—Ç—å –∫—Ä—É–ø–Ω—ã–µ –ø–∞–ø–∫–∏
```bash
df -h
sudo du -hxd1 / | sort -hr | head -n 20
cd /path/to/my-3xui-shopbot
du -h --max-depth=1 | sort -hr
```

### –û—á–∏—Å—Ç–∫–∞ –±—ç–∫–∞–ø–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –±—ç–∫–∞–ø—ã:
```bash
cd /path/to/my-3xui-shopbot/backups
ls -lh
rm -i db-backup-*.zip
```
–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π:
```bash
find /path/to/my-3xui-shopbot/backups -type f -name 'db-backup-*.zip' -mtime +7 -print
find /path/to/my-3xui-shopbot/backups -type f -name 'db-backup-*.zip' -mtime +7 -delete
```

### –û—á–∏—Å—Ç–∫–∞ journald
```bash
sudo journalctl --vacuum-time=7d
# –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä
sudo journalctl --vacuum-size=200M
```

### –û—á–∏—Å—Ç–∫–∞ APT
```bash
sudo apt-get autoremove -y
sudo apt-get autoclean -y
sudo apt-get clean -y
```

### –û—á–∏—Å—Ç–∫–∞ pip –∏ Python –º—É—Å–æ—Ä–∞
```bash
rm -rf ~/.cache/pip
cd /path/to/my-3xui-shopbot
find . -type d -name '__pycache__' -prune -exec rm -rf {} +
find . -type f -name '*.pyc' -delete
```

### –û—á–∏—Å—Ç–∫–∞ /tmp –ø–æ—Å–ª–µ speedtest
```bash
sudo rm -rf /tmp/ookla-speedtest* /tmp/speedtest* 2>/dev/null || true
```

### Docker (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```bash
docker system df
docker system prune -af
docker volume prune -f
# –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
docker compose down
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```bash
sudo du -hxd1 / | sort -hr | head -n 20
df -h
```

## üîí HTTPS-–ø—Ä–æ–∫—Å–∏ –∏ YooMoney OAuth

### –ó–∞–¥–∞—á–∞
–í–∫–ª—é—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ HTTPS –Ω–∞ –¥–æ–º–µ–Ω–µ (–ø–æ—Ä—Ç 443) –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-–∫–∞–±–∏–Ω–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ `http://127.0.0.1:1488`. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã OAuth-–∫–æ–ª–±—ç–∫–æ–≤ YooMoney.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∏ —Ñ–∞–π—Ä–≤–æ–ª–∞
```bash
# DNS: A-–∑–∞–ø–∏—Å—å –¥–æ–º–µ–Ω–∞ vless.24x7.hk –¥–æ–ª–∂–Ω–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, 144.124.226.190)
sudo ufw allow 'Nginx Full'
sudo ufw status
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx –∏ Certbot
```bash
sudo apt-get update
sudo apt-get install -y nginx certbot python3-certbot-nginx
sudo systemctl enable --now nginx
sudo mkdir -p /var/www/html
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∞–π—Ç–∞ (–ø–æ—Ä—Ç 80 –∏ 443)
–°–æ–∑–¥–∞–π—Ç–µ `/etc/nginx/sites-available/vless.24x7.hk`:
```nginx
server {
    listen 80;
    server_name vless.24x7.hk;

    location /.well-known/acme-challenge/ {
        root /var/www/html;
    }
    location / {
        return 301 https://$host$request_uri;
    }
}

server {
    listen 443 ssl;
    server_name vless.24x7.hk;

    ssl_certificate     /etc/letsencrypt/live/vless.24x7.hk/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/vless.24x7.hk/privkey.pem;

    set $upstream http://127.0.0.1:1488;

    location / {
        proxy_pass $upstream;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Proto https;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header X-Forwarded-Host $host;
    }

    location /yoomoney/callback {
        proxy_pass $upstream/yoomoney/callback;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Proto https;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header X-Forwarded-Host $host;
    }
    location /yoomoney-webhook {
        proxy_pass $upstream/yoomoney-webhook;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-Proto https;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header X-Forwarded-Host $host;
    }
}
```
–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx:
```bash
sudo ln -s /etc/nginx/sites-available/vless.24x7.hk /etc/nginx/sites-enabled/vless.24x7.hk
sudo nginx -t
sudo systemctl reload nginx
```

### –í—ã–ø—É—Å–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ Let‚Äôs Encrypt
```bash
sudo certbot --nginx -d vless.24x7.hk --redirect
sudo nginx -t && sudo systemctl reload nginx
```
–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ—Ä—Ç—ã —Å–ª—É—à–∞—é—Ç—Å—è:
```bash
ss -tlnp | grep -E ':80|:443'
curl -vk https://vless.24x7.hk/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –Ω–∞ 1488
```bash
ss -tlnp | grep ':1488'
systemctl status shopbot
```
–ï—Å–ª–∏ –ø–æ—Ä—Ç 1488 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É –±–æ—Ç–∞ (—Å–º. –≤—ã—à–µ —Ä–∞–∑–¥–µ–ª ¬´–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Ubuntu (–•–æ—Å—Ç–∏–Ω–≥)¬ª).

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ YooMoney —Å HTTPS
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–¥—Ä–µ—Å–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–æ–º–µ–Ω–µ –±–µ–∑ –ø–æ—Ä—Ç–∞ –∏ —Å HTTPS:
* Redirect URI: `https://vless.24x7.hk/yoomoney/callback`
* Notification URI: `https://vless.24x7.hk/yoomoney-webhook`

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:
* `Client ID` (–∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ YooMoney),
* –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `Client Secret` (–µ—Å–ª–∏ –≤–∫–ª—é—á–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏),
* `–ö–æ—à–µ–ª—ë–∫`,
* `Redirect URI`,
* `–°–µ–∫—Ä–µ—Ç –≤–µ–±—Ö—É–∫–∞`.
–ù–∞–∂–º–∏—Ç–µ ¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å YooMoney¬ª ‚Äî –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å, –ø–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ –∫–æ–ª–±—ç–∫ —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è.

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
sudo nginx -t
sudo tail -n 200 /var/log/nginx/error.log
sudo ufw status
ss -tlnp | grep -E ':80|:443|:1488'
```
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã curl:
```bash
curl -vk https://vless.24x7.hk/
curl -vk "https://vless.24x7.hk/yoomoney/callback?code=test"
```
–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `Connection refused` –Ω–∞ 443 ‚Äî —Å–∞–π—Ç –Ω–µ –≤–∫–ª—é—á–µ–Ω, –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—ë–Ω.
